<!doctype html>
<html>

<meta name="description" content="VRcollabâ€™s Core Technology that automatically converts BIM (Building Information Models) for use in Virtual Reality with speed and accuracy (7GB in 10 Minutes).">
<title>Account Overview - BIM and VDC Coordination in Virtual Reality</title>
{{ partial "head.html" . }}
<script src='{{ "vendor/js/jquery-dateformat.min.js" | absURL }}'></script>

<body>
    {{ partial "header.html" . }} {{ partial "hero.html" . }}

    <div class="container">
        <div class="row mt-4" style="margin-bottom: 40px;">
            <div class="col-md-8 mx-auto">
                <div class="alert alert-danger" role="alert" id="verificationAlert" style="display: none">
                    Verify your account email address before you use VRcollab.
                </div>
                <h2 class="display-7 font-weight-normal">License details</h2>
                <p class="mt-2">Your license will expire on <b id="expiredAt">N.A.</b>.</p>
                <a class="btn btn-primary" href="https://auth.api.vrcollab.com/v1/version/latest-stable?redirect=true" target="_blank">Download
                    VRcollab Lite</a>
                <button class="btn btn-outline-success ml-3" type="submit">Buy License</button>
                <hr>
                <h2 class="display-7 font-weight-normal">Account details</h2>
                <div class="alert alert-success mt-3" role="alert" id="emailUpdateSuccess" style="display: none">
                </div>
                <div class="form-group">
                    <label for="emailInput">Email address</label>
                    <input class="form-control" id="email" placeholder="name@example.com" required readonly>
                </div>
                <button class="btn btn-primary mr-3" id="verificationButton" style="display: none">Resend verification email</button>
                <button class="btn btn-danger" id="logoutButton">Logout</button>
                <hr>
                <div class="alert alert-success mt-3" role="alert" id="passwordUpdateSuccess" style="display: none"></div>
                <form class="needs-validation" id="passwordForm" novalidate>
                    <div class="form-group">
                        <label for="new-password">New Password</label>
                        <input type="password" class="form-control" id="new-password" placeholder="password" pattern=".{10,}" required>
                        <div class="invalid-feedback">
                            Password must be at least 10 chars.
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirmpassword">Confirm password</label>
                        <input type="password" class="form-control" id="confirmpassword" placeholder="confirm password" required>
                        <div class="invalid-feedback">
                            Passwords must match.
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Password</button>
                </form>
                <hr>
                <h2 class="display-7 font-weight-normal">Personal details</h2>
                <div class="alert alert-success mt-3" role="alert" id="profileUpdateSuccess" style="display: none">
                </div>
                <form class="needs-validation" id="personalForm" novalidate>
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="name" required>
                        <div class="invalid-feedback">
                            Please provide your name.
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="company">Company</label>
                        <input type="text" class="form-control" id="company" placeholder="company">
                    </div>
                    <div class="form-group">
                        <label for="industry">Industry</label>
                        <select class="form-control" id="industry">
                            <option value="">N/A</option>
                            <option value="Architecture">Architecture</option>
                            <option value="Commercial Interiors">Commercial Interiors</option>
                            <option value="Construction - Commercial">Construction - Commercial</option>
                            <option value="Construction - Infrastructure">Construction - Infrastructure</option>
                            <option value="Construction - Residential">Construction - Residential</option>
                            <option value="Engineering - Civil">Engineering - Civil</option>
                            <option value="Engineering - Mechanical">Engineering - Mechanical</option>
                            <option value="Engineering - Other">Engineering - Other</option>
                            <option value="Event Planning">Event Planning</option>
                            <option value="Facilites Management">Facilities Management</option>
                            <option value="Film and Stage">Film &amp; Stage</option>
                            <option value="Game Design">Game Design</option>
                            <option value="Graphic Design">Graphic Design</option>
                            <option value="Interior Design">Interior Design</option>
                            <option value="Landscape Architecture">Landscape Architecture</option>
                            <option value="Law Enforcement and Security">Law Enforcement &amp; Security</option>
                            <option value="Product Design">Product Design</option>
                            <option value="Survey">Survey</option>
                            <option value="Urban Planning">Urban Planning</option>
                            <option value="Woodworking">Woodworking</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Personal Details</button>
                </form>
            </div>
        </div>
    </div>
    <script>
        (() => {
            $.account.valid().catch(_ => window.location.href = "/login").then(data => {
                $("#expiredAt").html($.format.date(new Date(data.License.ExpiredAt), 'MMM dd, yyyy'));
                $("#email").val(data.Email);
                $("#name").val(data.Name);
                $("#company").val(data.Company);
                $("#industry").val(data.Industry);

                if (!data.EmailVerified) {
                    $("#verificationAlert").show();
                    $("#verificationButton").show();
                }
            });

            function setSuccessMessage(selector, message) {
                if (!message) { $(selector).hide(); }
                else { $(selector).html(message); $(selector).show(); }
            }

            $("#verificationButton").on("click", () => {
                $.account.verify_email().then(_ => {
                    setSuccessMessage("#emailUpdateSuccess", "A verification email has been sent to your email address");
                }).catch(_ => window.location.href = "/login");
            });

            $("#logoutButton").on("click", ($event) => {
                $event.preventDefault();
                $event.stopPropagation();
                $.account.logout();
                window.location.href = "/login";
            });

            $("#passwordForm").on("submit", ($event) => {
                $form = $("#passwordForm");
                $event.preventDefault();
                $event.stopPropagation();

                if ($("#new-password").val() != $("#confirmpassword").val()) {
                    document.getElementById("confirmpassword").setCustomValidity("Passwords must match.");
                }
                else {
                    document.getElementById("confirmpassword").setCustomValidity("");
                }

                $form.addClass("was-validated");
                if (!document.getElementById("passwordForm").checkValidity()) {
                    return;
                }

                const password = $("#new-password").val();
                $.account.update_password(password).then(_ => {
                    setSuccessMessage("#passwordUpdateSuccess", "Password updated.");
                }).catch(_ => window.location.href = "/login");
            });

            $("#personalForm").on("submit", ($event) => {
                $event.preventDefault();
                $event.stopPropagation();

                const name = $("#name").val();
                const company = $("#company").val();
                const industry = $("#industry").val();

                $.account.update_profile(name, company, industry).then(_ => {
                    setSuccessMessage("#profileUpdateSuccess", "Personal details updated.");
                }).catch(_ => window.location.href = "/login");
            });
        })();
    </script>

    <!-- footer -->
    {{ partial "footer.html" . }}
</body>

</html>